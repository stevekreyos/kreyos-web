/*! CSS Slider jQuery plugin | (c) 2013 digital-telepathy | http://www.dtelepathy.com/ */
(function(c,h,g,f){var e=function(a,b){this._dropdownNavVisible=!1;this._eventTrigger={};this._interacting=!1;this._interactingOffset={top:-1,left:-1};this.elements={};this.current=0;this.previous=-1;this.namespace="slider";this.sliderHeight=this.sliderWidth=-1;this.navigationGutter=0;this.autoPlay=!1;this.options={easing:"ease-in-out",loop:!0,method:"css",navigation:">.slider-navigation",navigationWidth:"24%",next:">.next",orientation:"horizontal",prev:">.prev",slides:">.slide",speed:500,start:0,
touch:!1,autoPlay:!1,autoPlayDelay:5E3,dropdownNav:!0};this.initialize(a,b)};e.prototype._addNavigationElements=function(a){var b=this;this.elements.slides.each(function(d){var c=b.elements.slides.eq(d).data("label")||"Slide "+(d+1);a.append('<a href="#" data-slide="'+d+'"><span>'+c+"</span></a>")})};e.prototype._adjustDimensions=function(){var a=this;this.sliderWidth=this.elements.slider.width();this.sliderHeight=this.elements.slider.height();this.elements.navigation.length&&"vertical"==this.options.orientation&&
(Modernizr.mq("only screen and (max-width: 767px)")?this.showDropdownNav():this.hideDropdownNav());this._getNavigationDimensions();this.elements.slides.each(function(b){var d={left:(b-a.current)*(a.sliderWidth+a.navigationGutter),width:a.sliderWidth-a.navigationGutter,height:a.sliderHeight};"vertical"==a.options.orientation&&(d.left=a.navigationGutter,d.top=(b-a.current)*a.sliderHeight);a.elements.slides.eq(b).css(d,c.extend(f.prefixCSS({transition:"left 0ms, top 0ms"})))});this.elements.navigation.length&&
"vertical"==this.options.orientation&&(this.elements.navigation.width(this.navigationGutter),this.elements.navigation.height(this.sliderHeight),this.elements.navigationLinks.css({height:Math.round(this.sliderHeight/this.elements.navigationLinks.length)}))};e.prototype._autoPlay=function(){var a=this;setTimeout(function(){a.autoPlay&&a.next();a._autoPlay()},this.options.autoPlayDelay)};e.prototype._bindEvents=function(){var a=this;this.elements.prev.on("click",function(b){b.preventDefault();a.autoPlay=
!1;a.prev()});this.elements.next.on("click",function(b){b.preventDefault();a.autoPlay=!1;a.next()});this.elements.navigation.on("click","a",function(b){b.preventDefault();b=c.data(this,"$this")||c.data(this,"$this",c(this));a.autoPlay=!1;a.goTo(b.data("slide"))});this.elements.body.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(b){a.elements.slides.filter(b.target).length&&a._eventComplete()});this.elements.slider.on("mousedown",function(b){1>=b.button&&a._touchStart(b)}).on("mousemove",
function(b){1>=b.button&&a._touchMove(b)}).on("mouseup",function(b){1>=b.button&&a._touchEnd(b)});h.addEventListener&&(this.elements.slider[0].addEventListener("touchstart",function(b){a._touchStart(b)},!1),this.elements.slider[0].addEventListener("touchmove",function(b){a._touchMove(b)},!1),this.elements.slider[0].addEventListener("touchend",function(b){a._touchEnd(b)},!1));c(h).resize(function(){a._adjustDimensions()}).resize(c.throttle(250,function(){a._setTransition()}));this.elements.slider.on(this.namespace+
":before",function(b,d,c){b=a.elements.slides.eq(c).data("label")||"Slide "+(c+1);"undefined"!=typeof a.elements.dropdownNav&&(a.elements.dropdownNavSelected.text(b),a.elements.dropdownNavLinks.removeClass("active").eq(c).addClass("active"));a.elements.navigation.length&&a.elements.navigationLinks.removeClass("active").eq(c).addClass("active")})};e.prototype._build=function(){var a=this;this.sliderWidth=this.elements.slider.width();this.sliderHeight=this.elements.slider.height();this.elements.navigation.length&&
this._buildNavigation();"css"==this.options.method&&this._setTransition();this.elements.slides.each(function(b){var d={position:"absolute",left:(b-a.current)*a.sliderWidth};"vertical"==a.options.orientation&&(d=c.extend(d,{left:this.navigationGutter,top:(b-a.current)*a.sliderHeight,width:a.sliderWidth,height:a.sliderHeight}));a.elements.slides.eq(b).css(d)})};e.prototype._buildDropdownNav=function(){var a=this;this.elements.dropdownNav=c('<div class="'+this.namespace+'-dropdown-nav" />').insertBefore(this.elements.slider);
this.elements.dropdownNavSelected=c('<div class="'+this.namespace+'-dropdown-nav-selected" />').appendTo(this.elements.dropdownNav);this.elements.dropdownNavOptions=c('<div class="'+this.namespace+'-dropdown-nav-options" />').appendTo(this.elements.dropdownNav);this.elements.dropdownNavList=c('<div class="'+this.namespace+'-dropdown-nav-list" />').appendTo(this.elements.dropdownNavOptions);this._addNavigationElements(this.elements.dropdownNavList);this.elements.dropdownNavLinks=this.elements.dropdownNavOptions.find("a");
this.elements.dropdownNavSelected.text(this.elements.dropdownNavLinks.eq(this.current).addClass("active").text());this.elements.dropdownNavSelected.on("click",function(b){b.preventDefault();a.elements.dropdownNavOptions.show();a.elements.body.on("click."+a.namespace,function(b){1>c(b.target).closest("."+a.namespace+"-dropdown-nav-list, ."+a.namespace+"-dropdown-nav-selected").length&&(a.elements.dropdownNavOptions.hide(),a.elements.body.off("click."+a.namespace))})});this.elements.dropdownNavOptions.on("click",
"a",function(b){b.preventDefault();b=c.data(this,"$this")||c.data(this,"$this",c(this));a.elements.dropdownNavOptions.hide();a.elements.body.off("click."+a.namespace);a.autoPlay=!1;a.goTo(b.data("slide"))})};e.prototype._buildNavigation=function(){this._addNavigationElements(this.elements.navigation);this.elements.navigationLinks=this.elements.navigation.find("a");this.elements.navigationLinks.eq(this.current).addClass("active");if("vertical"==this.options.orientation){var a=this.sliderHeight/this.elements.slides.length;
this._getNavigationDimensions();this.elements.navigation.css({position:"absolute",top:0,left:0,width:this.navigationGutter,height:this.sliderHeight});this.elements.navigationLinks.css({position:"relative",height:a+"px"}).eq(this.current).addClass("active")}};e.prototype._eventComplete=function(){this._triggerEvent("complete")&&(this.animating=!1,this.elements.slider.triggerHandler(this.namespace+":complete",[this]),this._eventTrigger.complete=0)};e.prototype._getElements=function(){this.elements.body=
c(document.body);this.elements.slides=this.elements.slider.find(this.options.slides);this.elements.prev=this.elements.slider.find(this.options.prev);this.elements.prev.length||(this.elements.prev=c(this.options.prev));this.elements.next=this.elements.slider.find(this.options.next);this.elements.next.length||(this.elements.next=c(this.options.next));this.elements.navigation=this.elements.slider.find(this.options.navigation);this.elements.navigation.length||(this.elements.navigation=c(this.options.navigation))};
e.prototype._getNavigationDimensions=function(){if(0==this.elements.navigation.length||"vertical"!=this.options.orientation)return!1;this.navigationGutter=this.options.navigationWidth;-1!=this.options.navigationWidth.indexOf("%")&&(this.navigationGutter=parseFloat(this.options.navigationWidth.replace("%",""))/100*this.sliderWidth);this._dropdownNavVisible&&(this.navigationGutter=0)};e.prototype._setTransition=function(a){var b=f.prefixCSS({transition:"left "+this.options.speed+"ms "+this.options.easing+
", top "+this.options.speed+"ms "+this.options.easing});a!=g?a.css(b):this.elements.slides.css(b)};e.prototype._touchEnd=function(a){if(!1===this.options.touch)return!1;var b=this;this._interacting=!1;this._interactingOffset.end=this._touchOffset(a);this.elements.slides.css(f.prefixCSS({"transition-duration":this.options.speed+"ms"}));a=!1;var d="next";"horizontal"==this.options.orientation?(a=0.5<=Math.abs(this._interactingOffset.left/this.sliderWidth),0<this._interactingOffset.left&&(d="prev")):
(a=0.5<=Math.abs(this._interactingOffset.top/this.sliderHeight),0<this._interactingOffset.top&&(d="prev"));this._interactionMoving&&a?(this.autoPlay=!1,this[d]()):this.elements.slides.each(function(a){var d={};"horizontal"==b.options.orientation?d.left=(a-b.current)*b.sliderWidth:d.top=(a-b.current)*b.sliderHeight;b.elements.slides.eq(a).css(d)})};e.prototype._touchMove=function(a){if(!1===this.options.touch)return!1;if(this._interacting){a.preventDefault();this._interactionMoving=!0;a=this._touchOffset(a);
var b=this;this._interactingOffset.top=a.top-this._interactingOffset.start.top;this._interactingOffset.left=a.left-this._interactingOffset.start.left;this.elements.slides.each(function(a){var c={};"horizontal"==b.options.orientation?c.left=(a-b.current)*b.sliderWidth+b._interactingOffset.left:c.top=(a-b.current)*b.sliderHeight+b._interactingOffset.top;b.elements.slides.eq(a).css(c)})}};e.prototype._touchOffset=function(a){var b={top:-1,left:-1};a.touches?a.touches.length&&(a.touches[0].pageY&&(b.top=
a.touches[0].pageY),a.touches[0].pageX&&(b.left=a.touches[0].pageX)):(b.top=a.screenY,b.left=a.screenX);return b};e.prototype._touchStart=function(a){if(!1===this.options.touch)return!1;this._interacting=!0;this._interactionMoving=!1;a=this._touchOffset(a);self.autoPlay=!1;this._interactingOffset={top:a.top,left:a.left,start:{top:a.top,left:a.left}};this.elements.slides.css(f.prefixCSS({"transition-duration":"0ms"}))};e.prototype._triggerEvent=function(a){this._eventTrigger[a]==g&&(this._eventTrigger[a]=
0);this._eventTrigger[a]++;return this._eventTrigger[a]==this.elements.slides.length?(this._eventTrigger[a]=0,!0):!1};e.prototype.goTo=function(a){var b=-1;switch(typeof a){case "number":b=a;break;case "string":case "object":b=this.elements.slides.index(c(a))}-1<b&&this.slide(b)};e.prototype.hideDropdownNav=function(){this._dropdownNavVisible=!1;"undefined"!=typeof this.elements.dropdownNav&&this.elements.dropdownNav.hide();this.elements.navigation.show()};e.prototype.initialize=function(a,b){var d=
this;this.options=c.extend(this.options,b[0]||{},c(a).data());this.autoPlay=this.options.autoPlay;f.supports("cssanimations")||(this.options.method="animate");this.current=this.options.start;this.elements.slider=c(a);this._getElements();this._bindEvents();this._build();this._autoPlay();this._adjustDimensions();setTimeout(function(){d._setTransition()},100)};e.prototype.next=function(){var a=Math.min(this.elements.slides.length-1,this.current+1);!1!==this.options.loop&&this.current==this.elements.slides.length-
1&&(a=0);this.goTo(a)};e.prototype.option=function(a,b){b!=g&&(this.options[a]=b);return this.options[a]};e.prototype.prev=function(){var a=Math.max(0,this.current-1);!1!==this.options.loop&&0==this.current&&(a=this.elements.slides.length-1);this.goTo(a)};e.prototype.run=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);b=a[0];a=1<a.length?a.slice(1):[];if("function"==typeof this[b])return this[b].apply(this,a);if("undefined"!=typeof this[b])return 0<a.length&&(this[b]=a[0]),
this[b]};e.prototype.slide=function(a){var b=this;this.animating=!0;this.previous=this.current;this.current=a;this.elements.slider.triggerHandler(this.namespace+":before",[this,a]);this.elements.navigation.length&&this.elements.navigationLinks.removeClass("active").eq(this.current).addClass("active");this.elements.slides.each(function(a){var c=b.elements.slides.eq(a);"animate"==b.options.method&&c.stop();var e={};"horizontal"==b.options.orientation?e.left=(a-b.current)*b.sliderWidth:e.top=(a-b.current)*
b.sliderHeight;c[b.options.method](e,b.options.speed,function(){"css"!=b.options.method&&b._eventComplete.apply(b)})})};e.prototype.showDropdownNav=function(){if(!this.options.dropdownNav)return!1;this.elements.dropdownNav||this._buildDropdownNav();this._dropdownNavVisible=!0;this.elements.dropdownNav.show();this.elements.navigation.hide()};c.extend(c.fn,{cssSlider:function(){var a=action=arguments,b=this;this.each(function(){var d=c.data(this,"CSSSlider");d||(d=new e(this,a),c.data(this,"CSSSlider",
d));0<action.length&&(d=d.run.apply(d,action),"undefined"!=typeof d&&(b=d))});return b}})})(jQuery,window,null,Impress);